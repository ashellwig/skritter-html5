gelato-component(data-name='study-prompt-vocab-contained')
  - var prompt = view.prompt;

  if prompt.review
    - var review = prompt.review;
    - var active = prompt.active;
    - var vocabs = prompt.review.vocab.getContained(true);

    if !vocabs.length
      - contained = [prompt.review.vocab];

    if vocabs.length

      hr

      div.value
        if active.get('showContained') || active.get('complete')

          for vocab in vocabs
            - var decomp = vocab.getDecomp();
            - var definition = vocab.getDefinition();
            - var heisig = vocab.get('heisigDefinition');
            - var mnemonic = vocab.getMnemonic();
            - var reading = vocab.get('reading');
            - var writing = vocab.get('writing');

            .child-character

              if vocabs.length > 1
                .child-vocab-row
                  span.child-writing(class=review.isChinese() ? 'text-chinese' : 'text-japanese')= writing
                  | &nbsp;
                  span.child-reading= review.isChinese() ? app.fn.pinyin.toTone(reading) : reading

              if decomp && !decomp.get('atomic')
                .child-vocab-row
                  label Decomposition
                  for child in decomp.get('Children')
                    .child-decomp
                      span.decomp-writing(class=review.isChinese() ? 'text-chinese' : 'text-japanese')= child.writing
                      | &nbsp;
                      span.decomp-reading= review.isChinese() ? app.fn.pinyin.toTone(child.reading) : child.reading
                      | &nbsp;
                      if app.user.get('showHeisig') && child.heisigDefinition
                        em!= child.heisigDefinition + ' - '
                      span.decomp-definition= child.definitions.en

              if vocabs.length > 1 && definition
                .child-vocab-row
                  label Definition
                  .child-definition
                    if app.user.get('showHeisig') && heisig
                      em!= heisig + ' - '
                    span!= definition

              if vocabs.length > 1 && mnemonic
                .child-vocab-row
                  label Mnemonic
                  .child-mnemonic!= vocab.getMnemonic().text

        else

          button#show-contained.btn.btn-default show

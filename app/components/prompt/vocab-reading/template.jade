gelato-component(data-name='prompt-vocab-reading')
  - var prompt = view.prompt
  - var reviews = view.prompt.reviews

  if reviews
    - var readings = reviews.vocab.getReadingObjects()
    - var index = 0

    case prompt.part

      when 'rune'
        for reading in readings
          if (reading.type === 'character')
            - var review = reviews.at(index)
            div.reading(data-position=index)
              if reviews.vocab.isChinese()
                if review.isReadingHidden()
                  button.show-reading.btn.btn-sm.btn-default show
                else
                  span= app.fn.pinyin.toTone(reading.value)
              else
                span= reading.value
            - index++
          else
            div.filler
              span= reading.value

      when 'tone'
        for reading in readings
          if (reading.type === 'character')
            - var review = reviews.at(index)
            - var classes = []
            if (reviews.position === index)
              - classes.push('active')
            div.reading(class=classes.join(' '), data-position=index)
              if reviews.vocab.isChinese()
                if review.isReadingHidden()
                  button.show-reading.btn.btn-sm.btn-default show
                else
                  if review.isComplete()
                    span= app.fn.pinyin.toTone(reading.value)
                  else
                    span= app.fn.pinyin.removeToneNumbers(reading.value)
              else
                span= reading.value
            - index++
          else
            div.filler
              span= reading.value

      default
        for reading in readings
          if (reading.type === 'character')
            - var review = reviews.at(index)
            div.reading(class=reviews.isComplete() ? '' : 'invisible', data-position=index)
              if reviews.vocab.isChinese()
                span= app.fn.pinyin.toTone(reading.value)
              else
                span= reading.value
            - index++
          else
            div.filler
              span= reading.value
